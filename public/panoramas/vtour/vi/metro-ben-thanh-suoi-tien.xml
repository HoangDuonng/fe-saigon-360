<krpano version="1.19" title="Virtual Tour">

	<include url="skin/vtourskin.xml" />
	<include url="plugins/callout.xml"/>
	<include url="plugins/circle_hotspots.xml"/>

	

	<callout 
		key="FXsqTqaGNSZER5dSETEm+VzQEh9sWSa5DZMFsSmMxYV9GcXs8W3R8A/mWXrG
			NUceXvrihmh28hfRF1ivrW0HMzEychPvNiD8B/4/ZzDaUE9Rh6Ig22aKJGDb
			ja1/kYIqmc/VKfItRE2RTSOIbIroxOtsz626NIpxWksAAifwhpNwuPXqDQpz
			2sRUMBzoPqZktpkItoSenN2mKd8Klfx7pOuB6CIK3e1CDXgyndqOt2mWybLZ
			cU/wfJVAecfxk15ghiqrzaDsbqrdABDowg==" 
		size="10" 
		color="0xffffff"
		rotate="45"
		distancepopup="5"   
		min_fov="180" 
		max_fov="0" 
		line_lenght="100"
		line_width="2" 
		shape="round"
		circle_active_width="50"
		animation="center_screen" 
		text_width="300"
		callout_bg_border="0,0,0,2"
		text_x="10"
		css_title="color:#fff;font-size:17px;"
		css_text="color:#fff;font-size:14px;text-shadow: 3px 3px 8px #000000;"
		title_background="0xb50000"
		text_background=""
		title_padding="10"
		text_padding="10 10 0 0"
	/>

	<layer 
		name="skin_logo" 
		url="skin/logo_2.png" 
		keep="true" 
		scale="0.5" 
		x="+20" y="-30" 
		align="topleft" 
		enabled="true" 
		alpha="0"
		onclick="openurl(https://www.tlu.edu.vn/)"
	/>

	<style name="infospot"
		renderer="webgl"
		type="text"
		css="color:#FFFFFF; font-size:16px; font-weight:bold; text-align:center;"
		width="80" height="80"
		bgroundedge="42"
		bgalpha="0.75"
		bgcolor="0x555555"
		bgborder="1 0xFFFFFF 1"
		bgshadow="0 0 16 0x0 0.5"
		txtshadow="0 0 3 0x0 1.0"
		mergedalpha="false"
		vcenter="true"
		oversampling="2"
		mipmapping="true"
		zoom="true"
		capture="false"
		/>



	<layer name="intro" type="container" keep="true" width="100%" height="100%" bgcolor="0x000000" bgalpha="0.6" zorder="9999" enabled="true" bgcapture="true" onloaded="on_intro_loaded()" onclick="on_intro_click()" >
		<layer name="intro_logo" url="skin/logo_2.png" enabled="false" scale="1.0" alpha="0" y="-150" align="center" />
		<layer name="intro_guide" url="skin/guide-removebg-preview.png" enabled="false" scale="1.0" alpha="0" y="+90" align="center" />
	</layer>

	<!--  -->
	<layer name="btn_info"
       url="skin/btn_info.png"
       keep="true"
       align="bottomright"
	   x="+40" y="+40" 
       width="30" height="30"
       onclick="show_info_popup();"
	/>

	<layer name="info_popup"
       type="container"
       align="center"
       width="80%"
       height="90%"
       bgcolor="0x000000"
       bgalpha="0.8"
       visible="false"
       enabled="false"
       keep="true"
       zorder="1000"
       scrolling="auto"
       css="overflow:auto; max-height:600px; margin: 20px auto; padding: 20px; border-radius: 10px;">


    <!-- Nút đóng popup -->
    <layer name="btn_close"
           url="skin/btn_close.png"
           align="topright"
           x="-100" y="0"
           width="25" height="25"
		   bgcolor="000000"
           onclick="hide_info_popup();"
    />

    <!-- Hình ảnh trong popup -->
   <layer name="info_image"
       url="skin/metro.jpg"
       align="top"
       width="100%"
       height="60%"
	/>

  <!-- Text content in the popup -->
	<layer name="info_text"
        type="text"
        align="bottom"
        width="100%"
        height="40%"
        html="Ga Metro Bến Thành là trung tâm giao thông quan trọng trong hệ thống vận tải đô thị của Thành phố Hồ Chí Minh. Là điểm trung chuyển chính của nhiều tuyến metro, ga đóng vai trò then chốt trong việc cải thiện kết nối và giảm ùn tắc giao thông trong thành phố. Nằm gần chợ Bến Thành lịch sử, ga mang đến sự thuận tiện trong việc di chuyển đến các địa danh nổi tiếng, khu mua sắm và trung tâm thương mại. Với thiết kế hiện đại và được trang bị các tiện ích tiên tiến, Ga Metro Bến Thành hướng đến việc cung cấp trải nghiệm di chuyển thuận lợi và hiệu quả cho cả người dân địa phương lẫn du khách. Khi đi vào hoạt động hoàn chỉnh, ga sẽ trở thành mắt xích quan trọng trong mạng lưới giao thông công cộng của thành phố, góp phần thúc đẩy hình thức di chuyển bền vững và thân thiện với môi trường."
        scrolling="auto"
        css="color:#000000; font-size:18px; text-align:justify; overflow:auto; padding:20px;
			background-color: rgba(255, 255, 255, 0.9); margin: 0 auto;
			border-radius: 15px; 
			line-height: 1.6;"
    />
	</layer>

	<!-- customize skin settings: maps, gyro, webvr, thumbnails, tooltips, layout, design, ... -->
	<skin_settings maps="false"
	               maps_type="google"
	               maps_bing_api_key=""
	               maps_google_api_key=""
	               maps_zoombuttons="false"
	               gyro="true"
	               webvr="true"
	               webvr_gyro_keeplookingdirection="false"
	               webvr_prev_next_hotspots="true"
	               littleplanetintro="false"
	               title="true"
	               thumbs="true"
	               thumbs_width="120" thumbs_height="80" thumbs_padding="10" thumbs_crop="0|40|240|160"
	               thumbs_opened="false"
	               thumbs_text="false"
	               thumbs_dragging="true"
	               thumbs_onhoverscrolling="false"
	               thumbs_scrollbuttons="false"
	               thumbs_scrollindicator="false"
	               thumbs_loop="false"
	               tooltips_buttons="false"
	               tooltips_thumbs="false"
	               tooltips_hotspots="false"
	               tooltips_mapspots="false"
	               deeplinking="false"
	               loadscene_flags="MERGE"
	               loadscene_blend="OPENBLEND(0.5, 0.0, 0.75, 0.05, linear)"
	               loadscene_blend_prev="SLIDEBLEND(0.5, 180, 0.75, linear)"
	               loadscene_blend_next="SLIDEBLEND(0.5,   0, 0.75, linear)"
	               loadingtext="loading..."
	               layout_width="100%"
	               layout_maxwidth="814"
	               controlbar_width="-24"
	               controlbar_height="40"
	               controlbar_offset="20"
	               controlbar_offset_closed="-40"
	               controlbar_overlap.no-fractionalscaling="10"
	               controlbar_overlap.fractionalscaling="0"
	               design_skin_images="vtourskin.png"
	               design_bgcolor="0x2D3E50"
	               design_bgalpha="0.8"
	               design_bgborder="0"
	               design_bgroundedge="1"
	               design_bgshadow="0 4 10 0x000000 0.3"
	               design_thumbborder_bgborder="3 0xFFFFFF 1.0"
	               design_thumbborder_padding="2"
	               design_thumbborder_bgroundedge="0"
	               design_text_css="color:#FFFFFF; font-family:Arial;"
	               design_text_shadow="1"
	               />

	<!--
	    For an alternative skin design either change the <skin_settings> values 
	    from above or optionally include one of the predefined designs from below.
	-->

	<include url="skin/vtourskin_design.xml" />
	
	<scene name="scene_metro_cong_le_loi" title="Metro cổng Lê Lợi" onstart="" thumburl="panos/metro_cong_le_loi.tiles/thumb.jpg" lat="" lng="" heading="">

		<view hlookat="82.087" vlookat="0.000" fovtype="MFOV" fov="81.591" maxpixelzoom="2.0" fovmin="70" fovmax="140" limitview="range" vlookatmin="-32.914" vlookatmax="32.914" />

		<preview url="panos/metro-cong-le-loi.tiles/preview.jpg" />

		<image>
			<cube url="panos/metro-cong-le-loi.tiles/pano_%s.jpg" />
		</image>
		<hotspot name="scene_metro-soat-ve" style="hs_circle" ath="81.606" atv="11.560" linkedscene="scene_metro-soat-ve" tag="Khám phá ngay" />
		<hotspot name="callout_metro-soat-ve" style="callout" ath="81.606" atv="11.560" linkedscene="scene_metro-soat-ve" title="Cổng soát vé Metro" content="Cổng soát vé Metro." />
		<hotspot name="spot2" url="skin/dan_duong.png" onloaded="do_crop_animation(128,128,20);" ath="81.447" atv="24.071" onclick="skin_loadscene(scene, get(skin_settings.loadscene_blend))" />
	</scene>

	<scene name="scene_tau-dien" title="Tàu điện ngầm" onstart="" thumburl="panos/tau-dien.tiles/thumb.jpg" lat="" lng="" heading="">
		<view hlookat="550.273" vlookat="0.000" fovtype="MFOV" fov="85.094" maxpixelzoom="2.0" fovmin="70" fovmax="140" limitview="range" vlookatmin="-34.543" vlookatmax="34.543"/>
		<preview url="panos/tau-dien.tiles/preview.jpg"/>
		<image>
		<cube url="panos/tau-dien.tiles/pano_%s.jpg"/>
		</image>

		<hotspot name="scene_metro-soat-ve" style="hs_circle" ath="-158.751" atv="12.851" linkedscene="scene_metro-soat-ve" tag="Khám phá ngay" />
		<hotspot name="callout_metro-soat-ve" style="callout" ath="-158.751" atv="12.851" linkedscene="scene_metro-soat-ve" title="Cổng soát vé Metro" content="Cổng soát vé Metro." />

		<hotspot name="spot2" url="skin/dan_duong.png" onloaded="do_crop_animation(128,128,20);" ath="-157.441" atv="25.347" onclick="skin_loadscene(scene, get(skin_settings.loadscene_blend))" />
	</scene>

	<scene name="scene_metro-soat-ve" title="Metro soát vé" onstart="" thumburl="panos/metro-soat-ve.tiles/thumb.jpg" lat="" lng="" heading="">
		<view hlookat="36.740" vlookat="0.000" fovtype="MFOV" fov="81.734" maxpixelzoom="2.0" fovmin="70" fovmax="140" limitview="range" vlookatmin="-32.980" vlookatmax="32.980"/>
		<preview url="panos/metro-soat-ve.tiles/preview.jpg"/>
		<image>
		<cube url="panos/metro-soat-ve.tiles/pano_%s.jpg"/>
		</image>

		<hotspot name="scene_tau-dien" style="hs_circle" ath="-0.612" atv="12.866" linkedscene="scene_tau-dien" tag="Khám phá ngay" />
		<hotspot name="callout_tau-dien" style="callout" ath="-0.612" atv="12.866" linkedscene="scene_metro_cong_le_loi" title="Tàu điện Metro" content="Hệ thống metro hiện đại của Thành phố Hồ Chí Minh, mang đến cách di chuyển nhanh chóng và hiệu quả trong thành phố." />

		<hotspot name="scene_metro_cong_le_loi" style="hs_circle" ath="71.471" atv="8.269" linkedscene="scene_metro_cong_le_loi" tag="Khám phá ngay" />
		<hotspot name="callout_cong-vien-30-thang-4" style="callout" ath="71.471" atv="8.269" linkedscene="scene_metro_cong_le_loi" title="Đường Lê Lợi" content="Một đại lộ sôi động ngay trung tâm Thành phố Hồ Chí Minh, nổi tiếng với mua sắm, ẩm thực và các điểm tham quan văn hóa." />

		<hotspot name="spot1" url="skin/dan_duong.png" onloaded="do_crop_animation(128,128,20);" ath="72.948" atv="20.371" onclick="skin_loadscene(scene, get(skin_settings.loadscene_blend))" />
		<hotspot name="spot2" url="skin/dan_duong.png" onloaded="do_crop_animation(128,128,20);" ath="-0.691" atv="25.520" onclick="skin_loadscene(scene, get(skin_settings.loadscene_blend))" />

	</scene>


	<!-- Actions -->
	<action name="show_info_popup">
		set(layer[info_popup].visible, true);
		set(layer[info_popup].enabled, true);
		set(layer[btn_close].visible, true);
		set(layer[btn_close].enabled, true);
	</action>

	<action name="hide_info_popup">
		set(layer[info_popup].visible, false);
		set(layer[info_popup].enabled, false);
	</action>


	<action name="on_intro_click">
	 	tween(layer[intro].alpha, 0);
		set(layer[intro].enabled, false);
		set(layer[skin_logo].alpha, 1);
		play_audio();
	</action>

	<action name="on_intro_loaded">
	 	delayedcall(0.5, 
			tween(layer[intro_logo].alpha, 1);
			set(layer[intro_guide].alpha, 1);	
		);
	</action>


	<action name="play_audio" autorun="onstart">
		playsound(voice, '%CURRENTXML%/audio/amthanh.mp3', 1, on_voice_finished());
	</action>

	<!-- startup action - load the first scene -->
	<action name="startup" autorun="onstart">
		if(startscene === null OR !scene[get(startscene)], copy(startscene,scene[0].name); );
		loadscene(get(startscene), null, MERGE);
		if(startactions !== null, startactions());
	</action>

	<action name="do_crop_animation" scope="local" args="framewidth, frameheight, framerate">
		<!-- define local variables -->
		calc(local.xframes, (caller.imagewidth /framewidth) BOR 0);
		calc(local.frames, xframes * ((caller.imageheight / frameheight) BOR 0));
		def(local.frame, integer, 0);
		
		<!-- set the first frame -->
		calc(caller.crop, '0|0|' + framewidth + '|' + frameheight);
		
		<!-- do the animation -->
		setinterval(calc('crop_anim_' + caller.name), calc(1.0 / framerate),
			if(caller.loaded,
				inc(frame);
				if(frame GE frames, if(caller.onlastframe !== null, callwith(caller, onlastframe() ) ); set(frame,0); );
				mod(xpos, frame, xframes);
				div(ypos, frame, xframes);
				Math.floor(ypos);
				mul(xpos, framewidth);
				mul(ypos, frameheight);
				calc(caller.crop, xpos + '|' + ypos + '|' + framewidth + '|' + frameheight);
			  ,
				<!-- stop the interval when the hotspot gets removed -->
				clearinterval(calc('crop_anim_' + caller.name));
			);
		);
	</action>

</krpano>
